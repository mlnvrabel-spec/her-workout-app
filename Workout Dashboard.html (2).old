<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Training</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        /* ========================================
           CSS VARIABLES & THEME CONFIGURATION
           ======================================== */
        :root {
            /* Geometry */
            --radius-xl: 28px;
            --radius-lg: 20px;
            --radius-sm: 12px;
            --space-xs: 8px;
            --space-sm: 16px;
            --space-md: 24px;
            --space-lg: 32px;
            --nav-height: 80px;

            /* Animation */
            --ease-fluid: cubic-bezier(0.25, 0.8, 0.25, 1);
            --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);

            /* Typography */
            --font-main: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        /* DARK THEME (Default) */
        [data-theme="dark"] {
            --bg-color: #050505;
            --bg-gradient: radial-gradient(ellipse at 0% 0%, #1a1f35 0%, #050505 50%);

            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.65);
            --text-tertiary: rgba(255, 255, 255, 0.4);

            /* Glass Surfaces */
            --glass-surface: rgba(255, 255, 255, 0.04);
            --glass-surface-strong: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.15);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);

            /* Navigation */
            --nav-glass: rgba(255, 255, 255, 0.02);
            --nav-text: #ffffff;
            --nav-active-pill: rgba(255, 255, 255, 0.15);
        }

        /* LIGHT THEME */
        [data-theme="light"] {
            --bg-color: #f5f5f7;
            --bg-gradient: radial-gradient(ellipse at 100% 0%, #e8edf5 0%, #ffffff 70%);

            --text-primary: #1c1c1e;
            --text-secondary: rgba(0, 0, 0, 0.55);
            --text-tertiary: rgba(0, 0, 0, 0.35);

            /* Glass Surfaces */
            --glass-surface: rgba(255, 255, 255, 0.7);
            --glass-surface-strong: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 255, 255, 0.9);
            --glass-highlight: rgba(255, 255, 255, 1);
            --glass-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);

            /* Navigation */
            --nav-glass: rgba(255, 255, 255, 0.8);
            --nav-text: #1c1c1e;
            --nav-active-pill: rgba(0, 0, 0, 0.08);
        }

        /* Day Specific Accents */
        .accent-push-a {
            --accent-color: #ff6b6b;
            --accent-glow: rgba(255, 107, 107, 0.3);
            --accent-gradient: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
        }

        .accent-pull-a {
            --accent-color: #a18cd1;
            --accent-glow: rgba(161, 140, 209, 0.3);
            --accent-gradient: linear-gradient(135deg, #a18cd1 0%, #8b73c2 100%);
        }

        .accent-push-b {
            --accent-color: #4ecdc4;
            --accent-glow: rgba(78, 205, 196, 0.3);
            --accent-gradient: linear-gradient(135deg, #4ecdc4 0%, #44b3ab 100%);
        }

        .accent-pull-b {
            --accent-color: #4facfe;
            --accent-glow: rgba(79, 172, 254, 0.3);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00c6ff 100%);
        }

        /* GLOBAL RESET */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            background-image: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-primary);
            font-family: var(--font-main);
            height: 100dvh;
            overflow: hidden;
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* Animated background glow */
        .liquid-bg {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 30%, var(--accent-glow), transparent 50%);
            opacity: 0.5;
            pointer-events: none;
            z-index: -1;
            transition: background 0.8s ease;
            animation: liquidFloat 20s ease-in-out infinite;
        }

        @keyframes liquidFloat {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            33% {
                transform: translate(2%, 2%) rotate(1deg);
            }

            66% {
                transform: translate(-1%, 1%) rotate(-0.5deg);
            }
        }

        #app-container {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
            padding-bottom: calc(var(--nav-height) + var(--space-md));
            position: relative;
            z-index: 1;
        }

        /* ========================================
           HEADER
           ======================================== */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: var(--space-lg) var(--space-md) var(--space-sm);
            background: transparent;
            transition: all 0.3s ease;
        }

        header.scrolled {
            padding: var(--space-sm) var(--space-md);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border-bottom: 1px solid var(--glass-border);
            background: var(--glass-surface);
        }

        /* Hide elements when scrolled */
        header.scrolled .header-top {
            margin-bottom: 0;
        }

        header.scrolled .app-label {
            opacity: 0;
            height: 0;
            margin: 0;
            overflow: hidden;
        }

        header.scrolled h1.day-title {
            font-size: 24px;
            letter-spacing: -0.5px;
        }

        header.scrolled p.day-subtitle {
            opacity: 0;
            height: 0;
            margin: 0;
            overflow: hidden;
        }

        header.scrolled .theme-toggle {
            width: 36px;
            height: 36px;
        }

        header.scrolled .theme-toggle svg {
            width: 16px;
            height: 16px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xs);
        }

        .app-label {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--text-tertiary);
            transition: opacity 0.3s ease, height 0.3s ease, margin 0.3s ease;
        }

        .theme-toggle {
            background: var(--glass-surface-strong);
            border: 1px solid var(--glass-border);
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
        }

        .theme-toggle:active {
            transform: scale(0.92);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
            fill: var(--text-primary);
            transition: transform 0.5s var(--ease-bounce);
        }

        h1.day-title {
            font-size: 44px;
            font-weight: 900;
            letter-spacing: -1.5px;
            line-height: 1.05;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: font-size 0.3s ease, letter-spacing 0.3s ease;
        }

        p.day-subtitle {
            font-size: 15px;
            color: var(--text-secondary);
            margin-top: 6px;
            font-weight: 500;
            transition: opacity 0.3s ease, height 0.3s ease, margin 0.3s ease;
        }

        /* ========================================
           DAY THEME HERO
           ======================================== */
        .day-theme-hero {
            margin: 0 var(--space-md) var(--space-md);
            padding: var(--space-sm) var(--space-md);
            background: var(--glass-surface);
            border-radius: var(--radius-lg);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
        }

        .day-theme-hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--accent-glow), transparent 70%);
            opacity: 0.3;
            pointer-events: none;
        }

        .theme-label {
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--accent-color);
            margin-bottom: 4px;
            display: block;
            position: relative;
        }

        .theme-text {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            line-height: 1.4;
            position: relative;
        }

        /* ========================================
           MUSCLE HEATMAP
           ======================================== */
        .muscle-heatmap {
            margin: 0 var(--space-md) var(--space-md);
            padding: var(--space-sm);
            background: var(--glass-surface);
            border-radius: var(--radius-lg);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .heatmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xs);
        }

        .heatmap-label {
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--accent-color);
        }

        .heatmap-count {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-tertiary);
        }

        .heatmap-body {
            display: flex;
            justify-content: center;
            gap: var(--space-md);
            padding: var(--space-xs) 0;
        }

        .body-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .body-svg {
            width: 80px;
            height: 140px;
            overflow: visible;
            /* Allow glows to bleed */
        }

        .body-svg image {
            /* mix-blend-mode removed - using transparent PNGs */
            filter: contrast(1.1) brightness(1.1);
        }

        .view-label {
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-tertiary);
        }

        
        /* Body Silhouette Base */
        .body-silhouette {
            fill: #1a1a1a;
            stroke: #333;
            stroke-width: 0.5px;
        }

        /* Mask styling (covering the image) */
        .muscle-mask {
            fill: #0a0a0a;
            /* Match dashboard bg roughly */
            opacity: 0.95;
            stroke: none;
            transition: all 0.5s ease-in-out;
            filter: blur(4px);
            /* Soften mask edges */
        }

        /* Targeted muscle (Highlight removed) */
        .muscle-mask.targeted {
            fill: #0a0a0a;
            opacity: 0.95;
        }

        /* Completed/activated muscle (Fully revealed Rainbow) */
        .muscle-mask.activated {
            opacity: 0;
            /* Mask vanishes, revealing the image */
        }

        @keyframes musclePulse {

            0%,
            100% {
                filter: drop-shadow(0 0 4px var(--accent-glow));
            }

            50% {
                filter: drop-shadow(0 0 10px var(--accent-glow));
            }
        }

        /* Muscle Legend */
        .muscle-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
            margin-top: var(--space-xs);
            padding-top: var(--space-xs);
            border-top: 1px solid var(--glass-border);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 3px 8px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            font-size: 10px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .legend-item.targeted {
            color: var(--text-primary);
            background: var(--accent-glow);
        }

        .legend-item.activated {
            color: #fff;
            background: var(--accent-color);
        }

        .legend-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--glass-border);
        }

        .legend-item.targeted .legend-dot {
            background: var(--accent-color);
        }

        .legend-item.activated .legend-dot {
            background: #fff;
            box-shadow: 0 0 6px var(--accent-glow);
        }

        /* ========================================
           PROGRESS BAR
           ======================================== */
        .day-progress {
            height: 4px;
            background: var(--glass-surface);
            border-radius: 2px;
            overflow: hidden;
            margin: 0 var(--space-md) var(--space-sm);
        }

        .day-progress-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 2px;
            width: 0%;
            transition: width 0.5s var(--ease-spring);
            box-shadow: 0 0 12px var(--accent-glow);
        }

        /* ========================================
           EXERCISE CARDS
           ======================================== */
        .card-list {
            padding: 0 var(--space-md);
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .card {
            background: var(--glass-surface);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            padding: var(--space-md);
            backdrop-filter: blur(24px) saturate(120%);
            -webkit-backdrop-filter: blur(24px) saturate(120%);
            box-shadow: var(--glass-shadow);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.25s var(--ease-spring), box-shadow 0.25s ease;
            animation: cardEnter 0.5s var(--ease-spring) backwards;
        }

        .card:nth-child(1) {
            animation-delay: 0.05s;
        }

        .card:nth-child(2) {
            animation-delay: 0.1s;
        }

        .card:nth-child(3) {
            animation-delay: 0.15s;
        }

        .card:nth-child(4) {
            animation-delay: 0.2s;
        }

        .card:nth-child(5) {
            animation-delay: 0.25s;
        }

        @keyframes cardEnter {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
        }

        .card:active {
            transform: scale(0.98);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--glass-highlight), transparent);
        }

        /* Card Header */
        .card-header {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: var(--space-sm);
        }

        .exercise-order {
            width: 32px;
            height: 32px;
            background: var(--accent-gradient);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: #fff;
            box-shadow: 0 4px 12px var(--accent-glow);
            flex-shrink: 0;
        }

        .exercise-info h3 {
            font-size: 17px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
            transition: all 0.3s ease;
        }

        .meta-row {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .meta-pill {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-secondary);
        }

        .meta-pill.accent {
            background: var(--accent-glow);
            color: var(--accent-color);
        }

        .rir-chip {
            font-size: 11px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .rir-chip.intense {
            background: rgba(255, 59, 48, 0.15);
            color: #ff5e57;
        }

        .rir-chip.controlled {
            background: rgba(255, 159, 64, 0.15);
            color: #ffb340;
        }

        .rest-badge {
            font-size: 11px;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-tertiary);
            cursor: pointer;
        }

        .checkbox-wrapper {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            border: 2px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s var(--ease-bounce);
            flex-shrink: 0;
        }

        .card.completed .checkbox-wrapper {
            background: var(--accent-gradient);
            border-color: transparent;
            box-shadow: 0 4px 12px var(--accent-glow);
        }

        .card.completed .exercise-info h3 {
            text-decoration: line-through;
            opacity: 0.4;
        }

        .card.completed .meta-row {
            opacity: 0.4;
        }

        .check-icon {
            width: 16px;
            height: 16px;
            fill: #fff;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.3s var(--ease-bounce);
        }

        .card.completed .check-icon {
            opacity: 1;
            transform: scale(1);
        }

        /* EXPANDED DETAILS */
        .details-wrapper {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.4s var(--ease-fluid);
        }

        .card.expanded .details-wrapper {
            grid-template-rows: 1fr;
            margin-top: var(--space-sm);
        }

        .details-inner {
            overflow: hidden;
            opacity: 0;
            transform: translateY(8px);
            transition: opacity 0.3s ease 0.1s, transform 0.3s ease 0.1s;
        }

        .card.expanded .details-inner {
            opacity: 1;
            transform: translateY(0);
        }

        .glass-inner-panel {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-sm);
            padding: var(--space-sm);
            margin-top: var(--space-xs);
            border: 1px solid var(--glass-border);
        }

        .label-pill {
            font-size: 10px;
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--accent-color);
            margin-bottom: 8px;
            display: block;
        }

        .label-pill.warning {
            color: #ff9f40;
        }

        .label-pill.pro {
            color: #4ecdc4;
        }

        .label-pill.accent {
            color: var(--accent-color);
        }

        .tip-text {
            font-size: 13px;
            line-height: 1.55;
            color: var(--text-secondary);
        }

        /* Technique Steps */
        .technique-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .technique-list li {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 13px;
            line-height: 1.5;
            color: var(--text-secondary);
        }

        .step-num {
            min-width: 20px;
            height: 20px;
            background: var(--accent-gradient);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: #fff;
            flex-shrink: 0;
        }

        /* Mistakes List */
        .mistakes-panel {
            background: rgba(255, 159, 64, 0.05);
            border-color: rgba(255, 159, 64, 0.15);
        }

        .mistakes-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .mistakes-list li {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 13px;
            line-height: 1.5;
            color: var(--text-secondary);
        }

        .mistake-icon {
            color: #ff6b6b;
            font-weight: 700;
            flex-shrink: 0;
        }

        /* Visualization Panel */
        .viz-panel {
            background: linear-gradient(135deg, rgba(var(--accent-color), 0.05), transparent);
            position: relative;
            overflow: hidden;
        }

        .viz-panel::before {
            content: '"';
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 48px;
            font-weight: 900;
            color: var(--accent-glow);
            opacity: 0.3;
            line-height: 1;
        }

        /* Pro Tip Panel */
        .pro-panel {
            background: rgba(78, 205, 196, 0.05);
            border-color: rgba(78, 205, 196, 0.15);
        }

        /* ========================================
           NAVIGATION DOCK
           ======================================== */
        .nav-dock-container {
            position: fixed;
            bottom: var(--space-md);
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 32px);
            max-width: 420px;
            z-index: 1000;
        }

        .nav-dock {
            height: 72px;
            border-radius: var(--radius-xl);
            background: var(--nav-glass);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid var(--glass-border);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 8px;
        }

        .nav-item {
            position: relative;
            padding: 12px 16px;
            cursor: pointer;
            text-align: center;
            border-radius: 16px;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .nav-day {
            font-size: 10px;
            font-weight: 600;
            color: var(--nav-text);
            opacity: 0.4;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: opacity 0.3s;
        }

        .nav-text {
            font-size: 13px;
            font-weight: 700;
            color: var(--nav-text);
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .nav-item.active {
            background: var(--nav-active-pill);
        }

        .nav-item.active .nav-text,
        .nav-item.active .nav-day {
            opacity: 1;
        }

        /* ========================================
           REST TIMER
           ======================================== */
        .timer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .timer-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .timer-card {
            background: var(--glass-surface-strong);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            text-align: center;
            min-width: 280px;
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            transform: scale(0.9);
            transition: transform 0.3s var(--ease-bounce);
        }

        .timer-overlay.active .timer-card {
            transform: scale(1);
        }

        .timer-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-tertiary);
            margin-bottom: var(--space-xs);
        }

        .timer-display {
            font-size: 72px;
            font-weight: 800;
            color: var(--accent-color);
            font-variant-numeric: tabular-nums;
            line-height: 1;
            margin-bottom: var(--space-md);
        }

        .timer-btn {
            background: var(--accent-gradient);
            border: none;
            color: #fff;
            font-size: 15px;
            font-weight: 700;
            padding: 14px 32px;
            border-radius: 16px;
            cursor: pointer;
            box-shadow: 0 8px 20px var(--accent-glow);
            transition: transform 0.2s ease;
        }

        .timer-btn:active {
            transform: scale(0.95);
        }

        /* Spacer - minimal to just clear nav */
        .spacer {
            height: 16px;
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>

<body data-theme="dark" class="accent-push-a">

    <div class="liquid-bg" id="liquid-bg"></div>

    <!-- Rest Timer Overlay -->
    <div class="timer-overlay" id="timer-overlay">
        <div class="timer-card">
            <span class="timer-label">Rest Time</span>
            <div class="timer-display" id="timer-display">2:00</div>
            <button class="timer-btn" id="timer-btn">Skip</button>
        </div>
    </div>

    <!-- Main Scroll Container -->
    <div id="app-container">
        <header id="header">
            <div class="header-top">
                <span class="app-label">Hypertrophy</span>
                <button class="theme-toggle" id="theme-toggle">
                    <svg id="theme-icon" viewBox="0 0 24 24">
                        <path
                            d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z" />
                    </svg>
                </button>
            </div>
            <h1 class="day-title" id="day-title">Push A</h1>
            <p class="day-subtitle" id="day-subtitle">Quad Bias + Chest Development</p>
        </header>

        <!-- Day Theme Hero -->
        <div class="day-theme-hero">
            <span class="theme-label" id="theme-label">Today's Focus</span>
            <p class="theme-text" id="theme-text">High-frequency quad training with compound pressing movements.</p>
        </div>

        <!-- Muscle Heatmap -->
        <div class="muscle-heatmap" id="muscle-heatmap">
            <div class="heatmap-header">
                <span class="heatmap-label">Muscles Targeted</span>
                <span class="heatmap-count" id="muscle-count">0/0 activated</span>
            </div>
            <div class="heatmap-body">
                <!-- Front View -->
                <div class="body-view">
                    <svg viewBox="0 0 100 180" class="body-svg">
                        <path d="M 50 5 L 42 8 L 40 18 L 42 26 L 35 28 L 20 30 L 10 38 L 8 55 L 8 75 L 6 85 L 4 90 L 8 95 L 12 90 L 14 85 L 16 60 L 20 50 L 25 60 L 28 80 L 26 90 L 24 110 L 24 140 L 26 160 L 28 172 L 26 178 L 35 178 L 40 175 L 40 160 L 42 140 L 44 110 L 48 95 L 52 95 L 56 110 L 58 140 L 60 160 L 60 175 L 65 178 L 74 178 L 72 172 L 74 160 L 76 140 L 76 110 L 74 90 L 72 80 L 75 60 L 80 50 L 84 60 L 86 85 L 88 90 L 92 95 L 96 90 L 94 85 L 92 75 L 92 55 L 90 38 L 80 30 L 65 28 L 58 26 L 60 18 L 58 8 Z" class="body-silhouette" />
                        <!-- Muscles Masks (Dark overlays that disappear) -->
                        <g class="muscle-masks">
                            <!-- Traps -->
                            <path d="M30 32 Q50 28 70 32 L72 38 Q50 36 28 38 Z" class="muscle-mask"
                                data-muscle="traps" />
                            <!-- Chest -->
                            <path d="M32 40 Q50 38 68 40 L66 60 Q50 64 34 60 Z" class="muscle-mask"
                                data-muscle="chest" />
                            <!-- Front Delts -->
                            <path d="M18 40 Q24 38 30 42 L28 52 Q22 50 16 45 Z" class="muscle-mask"
                                data-muscle="front-delts" />
                            <path d="M82 40 Q76 38 70 42 L72 52 Q78 50 84 45 Z" class="muscle-mask"
                                data-muscle="front-delts" />
                            <!-- Side Delts -->
                            <path d="M12 42 Q16 40 20 44 L18 54 Q14 52 10 48 Z" class="muscle-mask"
                                data-muscle="side-delts" />
                            <path d="M88 42 Q84 40 80 44 L82 54 Q86 52 90 48 Z" class="muscle-mask"
                                data-muscle="side-delts" />
                            <!-- Biceps -->
                            <path d="M20 60 Q26 60 26 78 Q20 80 14 78 Z" class="muscle-mask" data-muscle="biceps" />
                            <path d="M80 60 Q74 60 74 78 Q80 80 86 78 Z" class="muscle-mask" data-muscle="biceps" />
                            <!-- Forearms -->
                            <path d="M16 85 Q22 85 20 105 Q14 102 12 90 Z" class="muscle-mask" data-muscle="forearms" />
                            <path d="M84 85 Q78 85 80 105 Q86 102 88 90 Z" class="muscle-mask" data-muscle="forearms" />
                            <!-- Abs -->
                            <path d="M38 60 Q50 58 62 60 L60 90 Q50 92 40 90 Z" class="muscle-mask" data-muscle="abs" />
                            <!-- Obliques -->
                            <path d="M32 60 L38 60 L36 90 L30 85 Z" class="muscle-mask" data-muscle="obliques" />
                            <path d="M68 60 L62 60 L64 90 L70 85 Z" class="muscle-mask" data-muscle="obliques" />
                            <!-- Quads -->
                            <path d="M33 92 Q42 90 47 92 L45 140 Q38 142 31 140 Z" class="muscle-mask"
                                data-muscle="quads" />
                            <path d="M67 92 Q58 90 53 92 L55 140 Q62 142 69 140 Z" class="muscle-mask"
                                data-muscle="quads" />
                            <!-- Calves (front) -->
                            <path d="M33 145 Q39 145 39 170 Q33 172 27 170 Z" class="muscle-mask"
                                data-muscle="calves" />
                            <path d="M67 145 Q61 145 61 170 Q67 172 73 170 Z" class="muscle-mask"
                                data-muscle="calves" />
                        </g>
                    </svg>
                    <span class="view-label">Front</span>
                </div>
                <!-- Back View -->
                <div class="body-view">
                    <svg viewBox="0 0 100 180" class="body-svg">
                        <path d="M 50 5 L 42 8 L 40 18 L 42 26 L 35 28 L 20 30 L 10 38 L 8 55 L 8 75 L 6 85 L 4 90 L 8 95 L 12 90 L 14 85 L 16 60 L 20 50 L 25 60 L 28 80 L 26 90 L 24 110 L 24 140 L 26 160 L 28 172 L 26 178 L 35 178 L 40 175 L 40 160 L 42 140 L 44 110 L 48 95 L 52 95 L 56 110 L 58 140 L 60 160 L 60 175 L 65 178 L 74 178 L 72 172 L 74 160 L 76 140 L 76 110 L 74 90 L 72 80 L 75 60 L 80 50 L 84 60 L 86 85 L 88 90 L 92 95 L 96 90 L 94 85 L 92 75 L 92 55 L 90 38 L 80 30 L 65 28 L 58 26 L 60 18 L 58 8 Z" class="body-silhouette" />
                        <g class="muscle-masks">
                            <!-- Upper Traps -->
                            <path d="M28 32 Q50 26 72 32 L70 42 Q50 45 30 42 Z" class="muscle-mask"
                                data-muscle="traps" />
                            <!-- Rear Delts -->
                            <path d="M18 42 Q24 40 28 44 L26 54 Q20 52 16 48 Z" class="muscle-mask"
                                data-muscle="rear-delts" />
                            <path d="M82 42 Q76 40 72 44 L74 54 Q80 52 84 48 Z" class="muscle-mask"
                                data-muscle="rear-delts" />
                            <!-- Lats -->
                            <path d="M28 48 Q15 60 30 80 L40 90 L42 50 Z" class="muscle-mask" data-muscle="lats" />
                            <path d="M72 48 Q85 60 70 80 L60 90 L58 50 Z" class="muscle-mask" data-muscle="lats" />
                            <!-- Rhomboids/Mid Back -->
                            <path d="M42 45 Q50 42 58 45 L56 65 Q50 68 44 65 Z" class="muscle-mask"
                                data-muscle="rhomboids" />
                            <!-- Lower Back -->
                            <path d="M44 68 Q50 66 56 68 L54 88 Q50 90 46 88 Z" class="muscle-mask"
                                data-muscle="lower-back" />
                            <!-- Triceps -->
                            <path d="M18 55 Q24 55 24 75 Q18 78 12 75 Z" class="muscle-mask" data-muscle="triceps" />
                            <path d="M82 55 Q76 55 76 75 Q82 78 88 75 Z" class="muscle-mask" data-muscle="triceps" />
                            <!-- Glutes -->
                            <path d="M35 90 Q42 88 48 90 L46 110 Q40 115 32 110 Z" class="muscle-mask"
                                data-muscle="glutes" />
                            <path d="M65 90 Q58 88 52 90 L54 110 Q60 115 68 110 Z" class="muscle-mask"
                                data-muscle="glutes" />
                            <!-- Hamstrings -->
                            <path d="M32 115 Q40 115 40 145 Q32 148 26 145 Z" class="muscle-mask"
                                data-muscle="hamstrings" />
                            <path d="M68 115 Q60 115 60 145 Q68 148 74 145 Z" class="muscle-mask"
                                data-muscle="hamstrings" />
                            <!-- Calves (back) -->
                            <path d="M33 150 Q40 150 40 175 Q33 178 26 175 Z" class="muscle-mask"
                                data-muscle="calves" />
                            <path d="M67 150 Q60 150 60 175 Q67 178 74 175 Z" class="muscle-mask"
                                data-muscle="calves" />
                        </g>
                    </svg>
                    <span class="view-label">Back</span>
                </div>
            </div>
            <div class="muscle-legend" id="muscle-legend"></div>
        </div>

        <!-- Progress Bar -->
        <div class="day-progress">
            <div class="day-progress-fill" id="progress-fill"></div>
        </div>

        <!-- Exercise Cards -->
        <div class="card-list" id="card-list"></div>

        <div class="spacer"></div>
    </div>

    <!-- Navigation Dock -->
    <div class="nav-dock-container">
        <nav class="nav-dock" id="nav-dock">
            <div class="nav-item active" data-day="0">
                <span class="nav-day">Day 1</span>
                <span class="nav-text">Push A</span>
            </div>
            <div class="nav-item" data-day="1">
                <span class="nav-day">Day 2</span>
                <span class="nav-text">Pull A</span>
            </div>
            <div class="nav-item" data-day="2">
                <span class="nav-day">Day 3</span>
                <span class="nav-text">Push B</span>
            </div>
            <div class="nav-item" data-day="3">
                <span class="nav-day">Day 4</span>
                <span class="nav-text">Pull B</span>
            </div>
        </nav>
    </div>

    <script>
        const DATA = [
            {
                id: 'push-a', accent: 'accent-push-a',
                title: 'Push A', subtitle: 'Quad Bias + Chest Development',
                focusLabel: "Today's Focus", focusText: 'High-frequency quad training with compound pressing movements.',
                exercises: [
                    {
                        name: 'Pendulum Squat', sets: '3×6-10', rir: '1-2', rirClass: 'controlled', rest: '3:00',
                        muscles: ['quads', 'glutes'],
                        technique: ['Place feet low on platform at shoulder width', 'Unrack and descend slowly (3-4 seconds)', 'Drive knees forward over toes as deep as possible', 'Drive up through mid-foot, stopping short of lockout'],
                        mistakes: ['Cutting depth (ego lifting)', 'Allowing heels to rise off platform', 'Locking knees at the top (removes tension from quads)'],
                        visualization: 'The Piston Cue',
                        vizText: 'Imagine your femurs are pistons compressing a giant spring at the bottom. The goal is to close the angle between your calf and hamstring as much as possible.',
                        proTip: 'By not locking out, you induce "vascular occlusion" (the burn), forcing the Type II fibers to activate earlier in the set.'
                    },
                    {
                        name: 'Low Incline DB Press', sets: '3×6-10', rir: '1-2', rirClass: 'controlled', rest: '3:00',
                        muscles: ['chest', 'front-delts', 'triceps'],
                        technique: ['Retract scapula slightly into the bench', 'Lower dumbbells with elbows tucked at ~45°', 'Lower deep until dumbbells touch the outer chest fibers', 'Press up and slightly inward, but do not touch weights together'],
                        mistakes: ['Flaring elbows to 90° (shoulders take over)', 'Bouncing at the bottom', 'Pressing straight up (missing the adduction function of the pec)'],
                        visualization: 'The "Bicep to Pec" Cue',
                        vizText: "Don't think about pushing the dumbbells up. Instead, think about trying to touch your inner bicep to your pectorals.",
                        proTip: 'A 15° incline is biomechanically superior for "upper chest" for many people than 45° because it aligns better with the clavicular fibers without excessive front delt dominance.'
                    },
                    {
                        name: 'Cable Lateral Raise', sets: '3×10-15', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['side-delts'],
                        technique: ['Set cables to wrist height behind you or between legs', 'Cross cables (left hand grabs right cable)', 'Raise arms out and away toward the walls', 'Stop when arms are parallel to the floor'],
                        mistakes: ['Shrugging (traps engaging)', 'Swinging the torso', 'Keeping arms perfectly straight (keep a soft bend)'],
                        visualization: 'Reaching for the Walls',
                        vizText: "Imagine you're standing in a narrow hallway and trying to touch the walls on either side of you. You're sweeping out, not lifting up.",
                        proTip: 'The "cross body" setup places the side delt in a fully stretched position at the start. Initiate the movement slowly to avoid jerking out of this stretch.'
                    },
                    {
                        name: 'Cable Flys', sets: '2×10-15', rir: '0', rirClass: 'intense', rest: '2:00',
                        muscles: ['chest'],
                        technique: ['Set pulleys at chest height', 'Step forward, keep chest high', 'Open arms wide, letting elbows travel behind torso', 'Squeeze hands together (imagine hugging a tree)'],
                        mistakes: ['Turning it into a press (bending elbows too much)', 'Clanging handles together (loss of tension)', 'Rounding shoulders forward at the contraction'],
                        visualization: 'The Barrel Hug',
                        vizText: "Imagine you're hugging a massive oak tree. Your elbows must stay fixed in a slightly bent position.",
                        proTip: "Pause for a full second in the stretched position (arms back). This is where hypertrophy signaling is highest. Don't worry about touching hands at the top; the tension drops off there anyway."
                    },
                    {
                        name: 'Overhead Extension', sets: '2×10-15', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['triceps'],
                        technique: ['Set pulley at hip height, face away', 'Keep elbows near ears/head', 'Extend arms overhead, separating the rope', 'Control the lowering phase completely'],
                        mistakes: ['Letting elbows flare too wide', 'Arching the lower back to help move weight', 'Shortening the range (not going deep enough behind head)'],
                        visualization: 'Throwing the Ball',
                        vizText: 'Visualize throwing a heavy medicine ball directly over your head to someone standing behind you.',
                        proTip: 'At the very top, turn your wrists out (pronate). This fully shortens the tricep. However, the money is in the stretch—let the rope pull your hands deep behind your neck.'
                    }
                ]
            },
            {
                id: 'pull-a', accent: 'accent-pull-a',
                title: 'Pull A', subtitle: 'Hinge Bias + Lat Width',
                focusLabel: "Today's Focus", focusText: 'Posterior Chain Loading & Vertical Pulling.',
                exercises: [
                    {
                        name: 'Romanian Deadlift', sets: '3×6-8', rir: '1-2', rirClass: 'controlled', rest: '3:00',
                        muscles: ['hamstrings', 'glutes', 'lower-back'],
                        technique: ['Stand shoulder width, unlock knees (slight bend)', 'Hinge exclusively at the hips (push butt back)', 'Slide bar down thighs/shins', 'Stop when hips stop moving back, squeeze glutes to return'],
                        mistakes: ['"Squatting" the weight (too much knee bend)', 'Rounding the lumbar spine', 'Going too low (flexing spine instead of hips)'],
                        visualization: 'Car Door',
                        vizText: 'Imagine your hands are full of groceries and you have to close a car door behind you using only your butt. Push back, back, back.',
                        proTip: 'Range of motion is determined by your hamstring flexibility. The moment your hips stop traveling backward, the rep is over. Going lower just transfers tension to your lower back.'
                    },
                    {
                        name: 'Weighted Pull-Up', sets: '3×6-10', rir: '1-2', rirClass: 'controlled', rest: '3:00',
                        muscles: ['lats', 'biceps', 'rhomboids'],
                        technique: ['Use a neutral grip (palms facing each other)', 'Depress shoulders (reverse shrug) before bending elbows', 'Pull chest to bar', 'Lower under control'],
                        mistakes: ['Kipping/swinging', 'Rolling shoulders forward at the top', 'Not going to full hang'],
                        visualization: 'Elbows to Pockets',
                        vizText: "Don't think about pulling your body up. Visualize driving your elbows down into your back pockets.",
                        proTip: 'The neutral grip biases the lats and brachialis while being safer on the shoulders. If you cannot do weighted, do bodyweight or assisted, but keep the rep range low (6-10) to stimulate mechanical tension.'
                    },
                    {
                        name: 'Reverse Pec Deck', sets: '2×12-15', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['rear-delts'],
                        technique: ['Adjust seat so handles are at shoulder height', 'Push handles back with the back of your hands', 'Keep arms slightly bent but rigid', 'Stop when arms are in line with the body'],
                        mistakes: ['Squeezing shoulder blades together (traps take over)', 'Using a "rowing" motion', 'Excessive momentum'],
                        visualization: 'Pushing Walls Away',
                        vizText: "Imagine you're in a shrinking room and you're pushing the walls away with the backs of your hands.",
                        proTip: 'We want to isolate the rear delt. If you squeeze your shoulder blades (scapular retraction), the traps take over. Keep your shoulder blades wide and immobile; move only the arm bone (humerus).'
                    },
                    {
                        name: 'Chest-Supported Row', sets: '3×8-12', rir: '1-2', rirClass: 'controlled', rest: '2:00',
                        muscles: ['rhomboids', 'traps', 'rear-delts'],
                        technique: ['Glue chest to the pad', 'Use a pronated (overhand) or wide neutral grip', 'Protract (stretch) shoulders at bottom', 'Retract (squeeze) shoulders at top'],
                        mistakes: ['Lifting chest off pad to use momentum', 'Pulling with biceps (curling the weight)', 'Neck-cranking (looking up too high)'],
                        visualization: 'Wrap Around the Pad',
                        vizText: 'At the bottom, let the weight pull your shoulders forward so you feel your back "wrapping around" the pad. At the top, crack a walnut between your shoulder blades.',
                        proTip: 'This is for upper back (rhomboids/traps/rear delts). Unlike the pull-up (lats), here we want the shoulder blades to move dynamically.'
                    },
                    {
                        name: 'Incline DB Curls', sets: '2×10-15', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['biceps'],
                        technique: ['Set bench to 45-60°', 'Lay back, let arms hang perpendicular to floor', 'Curl up while keeping elbows pointed at floor', 'Supinate (twist pinky up) at the top'],
                        mistakes: ['Swinging elbows forward (front delt help)', 'Lifting head off bench', 'Not fully extending arm at bottom'],
                        visualization: 'Elbows in Cement',
                        vizText: 'Imagine your elbows are encased in cement blocks fixed to the floor. They can hinge, but they cannot move forward, backward, or sideways.',
                        proTip: "This targets the 'long head' of the biceps via the stretch. The stretch is the most anabolic part of this movement—don't cut the bottom short."
                    }
                ]
            },
            {
                id: 'push-b', accent: 'accent-push-b',
                title: 'Push B', subtitle: 'Quad Isolation + Upper Chest Focus',
                focusLabel: "Today's Focus", focusText: 'Pre-Exhausting Quads + Vertical Pressing.',
                exercises: [
                    {
                        name: 'Leg Extension', sets: '3×10-15', rir: '0', rirClass: 'intense', rest: '2:00',
                        muscles: ['quads'],
                        technique: ['Align knee joint with machine pivot point', 'Dorsiflex ankles (pull toes toward shins)', 'Kick up and hold for 1 second at the top', 'Lower slowly (3-second eccentric)'],
                        mistakes: ['Kicking explosively (momentum)', 'Butt coming off the seat', 'Partial reps at the bottom'],
                        visualization: 'The "Glue" Cue',
                        vizText: "Imagine your butt is super-glued to the seat. If you have to lift your hips to move the weight, it's too heavy.",
                        proTip: "Dorsiflexing the toes (pulling them up) reduces calf involvement and increases rectus femoris activation. This is your only direct rectus femoris work (squats don't hit it well)."
                    },
                    {
                        name: 'Seated OHP', sets: '3×6-10', rir: '1-2', rirClass: 'controlled', rest: '3:00',
                        muscles: ['front-delts', 'side-delts', 'triceps'],
                        technique: ['Set bench to 75-80° (not fully 90°)', 'Lower bar/handles to chin level', 'Press vertically, finishing with biceps by ears', 'Control the descent'],
                        mistakes: ['Arching back into a chest press', 'Cutting ROM (stopping at forehead)', 'Flaring elbows completely to sides (unsafe for rotator cuff)'],
                        visualization: 'Head Through Window',
                        vizText: 'As you press up, imagine pushing your head slightly forward "through the window" created by your arms (without moving your torso).',
                        proTip: 'Using a machine or Smith here is preferred over free weights for hypertrophy, as stability requirements are lower, allowing you to grind closer to failure safely.'
                    },
                    {
                        name: 'Machine Lateral Raise', sets: '3×10-15', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['side-delts'],
                        technique: ['Place elbows against pads', 'Keep chest supported against the pad', 'Drive elbows up/out leading the movement', 'Lower with resistance'],
                        mistakes: ['Gripping the handles too tight (activates forearms)', 'Shrugging shoulders up'],
                        visualization: 'Puppet Strings',
                        vizText: 'Imagine strings are attached to your elbows, pulling them up to the ceiling. Your hands are just hooks; they do no work.',
                        proTip: "This is an 'active rest' for your triceps and chest before the next heavy press. Keep your traps relaxed and depressed."
                    },
                    {
                        name: 'High Incline Smith Press', sets: '3×8-12', rir: '1-2', rirClass: 'controlled', rest: '3:00',
                        muscles: ['chest', 'front-delts', 'triceps'],
                        technique: ['Set bench to 45°', 'Lower bar toward the clavicle (upper chest/neck base)', 'Pause briefly on the chest', 'Press up to 90% lockout'],
                        mistakes: ['Lowering to the nipple line (too low for 45°)', 'Bouncing off the chest', 'Elbows flaring too wide (shoulder impingement risk)'],
                        visualization: 'Scraping the Chin',
                        vizText: "The bar path is fixed. You must position your body so the bar feels like it's almost going to scrape your chin on the way down. This isolates the clavicular (upper) pec.",
                        proTip: 'Since your front delts are fatigued from the OHP, your stabilizers are shot. The Smith machine is crucial here to allow you to safely push the upper pecs to failure without dropping the weight.'
                    },
                    {
                        name: 'Triceps Pushdown', sets: '2×10-15', rir: '0', rirClass: 'intense', rest: '60s',
                        muscles: ['triceps'],
                        technique: ['Pin elbows to your ribcage', 'Hinge only at the elbow', 'Pull the rope apart at the bottom', 'Squeeze triceps hard'],
                        mistakes: ['Shoulders rolling forward / leaning on the rope', 'Moving the elbows forward and back', 'Using momentum'],
                        visualization: 'Breaking the Rope',
                        vizText: "Don't just push down. Visualize trying to rip the rope in half as you reach the bottom of the movement.",
                        proTip: "This targets the lateral and medial heads of the triceps. Keep the tempo strict. If your shoulders roll forward, you're using your chest—drop the weight."
                    }
                ]
            },
            {
                id: 'pull-b', accent: 'accent-pull-b',
                title: 'Pull B', subtitle: 'Hamstring Isolation + Upper Back Bias',
                focusLabel: "Today's Focus", focusText: 'Shortened Position Hamstrings + Horizontal Pulling.',
                exercises: [
                    {
                        name: 'Lat Pulldown', sets: '3×8-12', rir: '1-2', rirClass: 'controlled', rest: '2:00',
                        muscles: ['lats', 'biceps'],
                        technique: ['Lock thighs under pad tightly', 'Keep torso relatively upright (slight lean okay)', 'Drive elbows down towards hips', 'Control the ascent to full stretch'],
                        mistakes: ['Leaning back too far (turns into a row)', 'Using momentum to start the pull', 'Shrugging at the ears'],
                        visualization: 'Dragging the Wall',
                        vizText: 'Visualize your elbows dragging down along a wall behind you.',
                        proTip: 'Use lifting straps here. Taking your grip strength out of the equation allows you to push the lats to true failure without your forearms giving out first.'
                    },
                    {
                        name: 'Seated Leg Curl', sets: '3×10-15', rir: '0', rirClass: 'intense', rest: '2:00',
                        muscles: ['hamstrings'],
                        technique: ['Align knee with pivot', 'Lock the thigh pad down hard onto legs', 'Drive heels back and under', 'Control the eccentric release (3 seconds)'],
                        mistakes: ['Hips lifting off the seat (cheating)', 'Dorsiflexing toes (keep ankles relaxed or neutral)', 'Bouncing out of the stretched position'],
                        visualization: 'Digging a Trench',
                        vizText: "Imagine you're trying to dig a trench in the ground using your heels.",
                        proTip: 'The seated curl places the hamstrings in a lengthened position (because the hips are flexed). This makes it superior to the lying leg curl for hypertrophy. Grip the handles tight to brace yourself into the seat.'
                    },
                    {
                        name: 'Wide Grip Cable Row', sets: '3×10-12', rir: '1-2', rirClass: 'controlled', rest: '2:00',
                        muscles: ['rhomboids', 'traps', 'rear-delts'],
                        technique: ['Use a wide mag-grip or straight bar', 'Keep torso upright (minimal sway)', 'Pull elbows high and wide (shoulder height)', 'Squeeze scapula together'],
                        mistakes: ['Pulling elbows into sides (hits lats, not upper back)', 'Rounding the back (spine safety)', 'Excessive leaning back'],
                        visualization: 'Scarecrow Pull',
                        vizText: 'Pull your elbows apart like a scarecrow. The goal is width.',
                        proTip: 'By flaring the elbows out to 45-60 degrees, you bias the upper back (traps, rhomboids, rear delts) rather than the lats.'
                    },
                    {
                        name: 'Face Pulls', sets: '2×15-20', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['rear-delts', 'traps'],
                        technique: ['Set rope to upper chest height', 'Grasp rope with thumbs facing back (hammer grip)', 'Pull towards forehead while spreading hands', 'Externally rotate (hands finish behind ears)'],
                        mistakes: ['Pulling to the chin/neck', 'Keeping hands close together', 'Using bodyweight to pull'],
                        visualization: 'Double Bicep Pose',
                        vizText: 'Finish the movement in a "double bicep" pose. Your knuckles should be facing the wall behind you.',
                        proTip: 'This is not a heavy strength movement. It\'s for rotator cuff health and rear delts. If you go too heavy, your internal rotators (pecs/lats) will take over, defeating the purpose.'
                    },
                    {
                        name: 'Preacher Curl', sets: '2×10-15', rir: '0', rirClass: 'intense', rest: '90s',
                        muscles: ['biceps'],
                        technique: ['Adjust seat so armpit fits snugly over pad', 'Extend arm fully', 'Curl weight without moving the upper arm', 'Squeeze biceps at the top'],
                        mistakes: ['Leaning back to gain leverage', 'Lifting elbows off the pad', 'Stopping short of full extension'],
                        visualization: 'The Hinge',
                        vizText: 'Your arm is a simple hinge. Nothing else in the body moves.',
                        proTip: 'This exercises the biceps in the "shortened position." However, be careful at the very bottom (full extension)—the load is high there. Control the negative to avoid tendon strain.'
                    }
                ]
            }
        ];

        const App = {
            state: { day: 0, completed: {}, timerInterval: null, timerSeconds: 0 },

            init() {
                // Set theme based on time
                const hour = new Date().getHours();
                if (hour >= 6 && hour < 19) {
                    document.body.setAttribute('data-theme', 'light');
                }

                this.cache();
                this.bind();
                this.render(0);
            },

            cache() {
                this.el = {
                    container: document.getElementById('app-container'),
                    header: document.getElementById('header'),
                    dayTitle: document.getElementById('day-title'),
                    daySubtitle: document.getElementById('day-subtitle'),
                    themeLabel: document.getElementById('theme-label'),
                    themeText: document.getElementById('theme-text'),
                    progressFill: document.getElementById('progress-fill'),
                    cardList: document.getElementById('card-list'),
                    navItems: document.querySelectorAll('.nav-item'),
                    themeToggle: document.getElementById('theme-toggle'),
                    themeIcon: document.getElementById('theme-icon'),
                    timerOverlay: document.getElementById('timer-overlay'),
                    timerDisplay: document.getElementById('timer-display'),
                    timerBtn: document.getElementById('timer-btn'),
                    liquidBg: document.getElementById('liquid-bg'),
                    // Heatmap elements
                    heatmap: {
                        muscles: document.querySelectorAll('.muscle-mask'),
                        count: document.getElementById('muscle-count'),
                        legend: document.getElementById('muscle-legend')
                    }
                };
            },

            bind() {
                // Scroll listener for header glass effect
                this.el.container.addEventListener('scroll', () => {
                    if (this.el.container.scrollTop > 10) {
                        this.el.header.classList.add('scrolled');
                    } else {
                        this.el.header.classList.remove('scrolled');
                    }
                });

                // Nav items
                this.el.navItems.forEach(item => {
                    item.addEventListener('click', () => this.goToDay(+item.dataset.day));
                });

                // Theme toggle
                this.el.themeToggle.addEventListener('click', () => this.toggleTheme());

                // Timer
                this.el.timerBtn.addEventListener('click', () => this.stopTimer());
                this.el.timerOverlay.addEventListener('click', e => {
                    if (e.target === this.el.timerOverlay) this.stopTimer();
                });

                // Swipe
                let startX = 0;
                this.el.container.addEventListener('touchstart', e => startX = e.touches[0].clientX, { passive: true });
                this.el.container.addEventListener('touchend', e => {
                    const dx = startX - e.changedTouches[0].clientX;
                    if (Math.abs(dx) > 60) {
                        if (dx > 0 && this.state.day < 3) this.goToDay(this.state.day + 1);
                        else if (dx < 0 && this.state.day > 0) this.goToDay(this.state.day - 1);
                    }
                }, { passive: true });
            },

            toggleTheme() {
                const current = document.body.getAttribute('data-theme');
                const next = current === 'dark' ? 'light' : 'dark';
                document.body.setAttribute('data-theme', next);

                // Update icon
                if (next === 'dark') {
                    this.el.themeIcon.innerHTML = '<path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>';
                } else {
                    this.el.themeIcon.innerHTML = '<path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"/>';
                }
            },

            goToDay(index) {
                if (index === this.state.day) return;

                // Update nav
                this.el.navItems[this.state.day].classList.remove('active');
                this.el.navItems[index].classList.add('active');
                this.state.day = index;

                // Fade out
                this.el.cardList.style.opacity = '0';
                this.el.cardList.style.transform = 'translateY(16px)';

                setTimeout(() => {
                    this.render(index);
                    this.el.cardList.style.opacity = '1';
                    this.el.cardList.style.transform = 'translateY(0)';
                    this.el.container.scrollTop = 0;
                }, 200);
            },

            render(index) {
                const d = DATA[index];

                // Update accent
                document.body.className = d.accent;

                // Update header
                this.el.dayTitle.textContent = d.title;
                this.el.daySubtitle.textContent = d.subtitle;
                this.el.themeLabel.textContent = d.focusLabel;
                this.el.themeText.textContent = d.focusText;

                // Update progress & heatmap
                this.updateProgress(d.id, d.exercises.length);
                this.updateHeatmap(index);

                // Render cards
                let html = '';
                d.exercises.forEach((ex, i) => {
                    const id = `${d.id}-${i}`;
                    const isCompleted = this.state.completed[id];

                    // Build technique steps list
                    const techSteps = ex.technique.map((step, idx) =>
                        `<li><span class="step-num">${idx + 1}</span>${step}</li>`
                    ).join('');

                    // Build mistakes list
                    const mistakesList = ex.mistakes.map(m =>
                        `<li><span class="mistake-icon">✗</span>${m}</li>`
                    ).join('');

                    html += `
                        <article class="card ${isCompleted ? 'completed' : ''}" id="${id}" onclick="App.toggleCard('${id}')">
                            <div class="card-header">
                                <div class="exercise-order">${i + 1}</div>
                                <div class="exercise-info">
                                    <h3>${ex.name}</h3>
                                    <div class="meta-row">
                                        <span class="meta-pill accent">${ex.sets}</span>
                                        <span class="rir-chip ${ex.rirClass}">RIR ${ex.rir}</span>
                                        <span class="rest-badge" onclick="App.startTimer(event, '${ex.rest}')">${ex.rest}</span>
                                    </div>
                                </div>
                                <div class="checkbox-wrapper" onclick="App.toggleComplete(event, '${id}')">
                                    <svg class="check-icon" viewBox="0 0 24 24">
                                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="details-wrapper">
                                <div class="details-inner">
                                    <div class="glass-inner-panel">
                                        <span class="label-pill">Technique</span>
                                        <ol class="technique-list">${techSteps}</ol>
                                    </div>
                                    <div class="glass-inner-panel mistakes-panel">
                                        <span class="label-pill warning">Common Mistakes</span>
                                        <ul class="mistakes-list">${mistakesList}</ul>
                                    </div>
                                    <div class="glass-inner-panel viz-panel">
                                        <span class="label-pill accent">${ex.visualization}</span>
                                        <p class="tip-text">${ex.vizText}</p>
                                    </div>
                                    <div class="glass-inner-panel pro-panel">
                                        <span class="label-pill pro">Pro Tip</span>
                                        <p class="tip-text">${ex.proTip}</p>
                                    </div>
                                </div>
                            </div>
                        </article>
                    `;
                });
                this.el.cardList.innerHTML = html;
                this.el.cardList.style.transition = 'opacity 0.25s ease, transform 0.25s ease';
            },

            updateProgress(dayId, total) {
                const completed = Object.keys(this.state.completed).filter(k => k.startsWith(dayId)).length;
                const percent = (completed / total) * 100;
                this.el.progressFill.style.width = percent + '%';
            },

            updateHeatmap(dayIndex) {
                const dayData = DATA[dayIndex];
                const completedIds = Object.keys(this.state.completed)
                    .filter(k => k.startsWith(dayData.id + '-'));

                // Reset all muscles
                this.el.heatmap.muscles.forEach(m => {
                    m.classList.remove('targeted', 'activated');
                });

                // Identify targeted and activated muscles
                const targetedMuscles = new Set();
                const activatedMuscles = new Set();

                dayData.exercises.forEach((ex, i) => {
                    if (!ex.muscles) return;

                    const isCompleted = this.state.completed[`${dayData.id}-${i}`];

                    ex.muscles.forEach(muscle => {
                        targetedMuscles.add(muscle);
                        if (isCompleted) activatedMuscles.add(muscle);
                    });
                });

                // Update DOM classes
                this.el.heatmap.muscles.forEach(m => {
                    const muscleId = m.dataset.muscle;
                    if (activatedMuscles.has(muscleId)) {
                        m.classList.add('activated');
                    } else if (targetedMuscles.has(muscleId)) {
                        m.classList.add('targeted');
                    }
                });

                // Update counts text
                this.el.heatmap.count.textContent = `${activatedMuscles.size}/${targetedMuscles.size} activated`;

                // Update legend
                this.updateHeatmapLegend(targetedMuscles, activatedMuscles);
            },

            updateHeatmapLegend(targeted, activated) {
                // Map of muscle ID to display name
                const formatName = id => id.replace('-', ' ').replace(/\b\w/g, c => c.toUpperCase());

                let html = '';
                const sortedMuscles = Array.from(targeted).sort();

                if (sortedMuscles.length === 0) {
                    html = '<span style="font-size:10px; color:var(--text-tertiary);">No specific muscles targeted today</span>';
                } else {
                    sortedMuscles.forEach(m => {
                        const isActivated = activated.has(m);
                        const className = isActivated ? 'activated' : 'targeted';
                        html += `
                            <div class="legend-item ${className}">
                                <div class="legend-dot"></div>
                                <span>${formatName(m)}</span>
                            </div>
                        `;
                    });
                }

                this.el.heatmap.legend.innerHTML = html;
            },

            toggleCard(id) {
                document.getElementById(id).classList.toggle('expanded');
            },

            toggleComplete(e, id) {
                e.stopPropagation();
                if (navigator.vibrate) navigator.vibrate(10);

                const card = document.getElementById(id);
                if (this.state.completed[id]) {
                    delete this.state.completed[id];
                    card.classList.remove('completed');
                } else {
                    this.state.completed[id] = true;
                    card.classList.add('completed');
                }

                const d = DATA[this.state.day];
                this.updateProgress(d.id, d.exercises.length);
                this.updateHeatmap(this.state.day);
            },
            startTimer(e, time) {
                e.stopPropagation();
                const parts = time.split(':');
                this.state.timerSeconds = parts.length === 2 ?
                    parseInt(parts[0]) * 60 + parseInt(parts[1]) :
                    parseInt(time) * 60;

                this.updateTimerDisplay();
                this.el.timerOverlay.classList.add('active');
                if (navigator.vibrate) navigator.vibrate(8);

                this.state.timerInterval = setInterval(() => {
                    this.state.timerSeconds--;
                    this.updateTimerDisplay();
                    if (this.state.timerSeconds <= 0) this.timerDone();
                }, 1000);
            },

            updateTimerDisplay() {
                const m = Math.floor(this.state.timerSeconds / 60);
                const s = this.state.timerSeconds % 60;
                this.el.timerDisplay.textContent = `${m}:${s.toString().padStart(2, '0')}`;
            },

            timerDone() {
                this.stopTimer();
                if (navigator.vibrate) navigator.vibrate([80, 40, 80]);
            },

            stopTimer() {
                clearInterval(this.state.timerInterval);
                this.el.timerOverlay.classList.remove('active');
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>

</html>